{"id":"172338516139198_1063273620379012","from":{"name":"Bassam Abd Elhamid","id":"1811475205784288"},"message":"Hi guys, It's not that geeky but I need your help :) \nI want to implement a so simple messaging service where users can send messages to each others \nthis my two tables \ncreate table Users (ID INT, UserName TEXT, ShaletedHashedPassword TEXT);\ncreate table Messages (Date int,FromUserID int, ToUserID int, MessageBody TEXT);\n\nWhat I want is to make it secure by not allowing anyone to read messages even db admin(just the sender and the receiver of the message), I understand that security is much more than that, But let's say that I want to hide MessageBody from anyone who can reach the database, Thank you","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/1063273620379012"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/1063273620379012"},{"name":"Report Post to Admin","link":"https://www.facebook.com/groups/egyptian.geeks/members/"}],"privacy":{"value":"","description":"","friends":"","allow":"","deny":""},"type":"status","created_time":"2016-01-16T08:01:08+0000","updated_time":"2016-01-16T08:52:08+0000","is_hidden":false,"is_expired":false,"comments":{"data":[{"created_time":"2016-01-16T08:03:07+0000","from":{"name":"Muhammad Al Rabbani","id":"436443206686932"},"message":"Sounds like the message body needs to be encrypted","can_remove":false,"like_count":0,"user_likes":false,"id":"1063273920378982"},{"created_time":"2016-01-16T08:15:00+0000","from":{"name":"Mohammad Tayseer","id":"10154965677956341"},"message":"Password hash will not work when the user changes his password\nUse PGP https://en.wikipedia.org/wiki/Pretty_Good_Privacy","can_remove":false,"like_count":3,"user_likes":false,"id":"1063276523712055"},{"created_time":"2016-01-16T08:22:08+0000","from":{"name":"Hosam Aly","id":"1348336588561390"},"message":"The only viable option I can think of is *client-side* asymmetric encryption (like PGP that Mohammad Tayseer suggested). I'll discuss the (unacceptable) alternatives in replies to this comment isA.","can_remove":false,"like_count":2,"user_likes":false,"id":"1063278230378551"},{"created_time":"2016-01-16T08:25:36+0000","from":{"name":"Taha Amin","id":"10154850341220590"},"message":"لو بتستخدم sql server ممكن تجرب https://msdn.microsoft.com/en-us/library/bb510663(v=sql.120).aspx","can_remove":false,"like_count":1,"user_likes":false,"id":"1063279290378445"},{"created_time":"2016-01-16T08:41:44+0000","from":{"name":"Hosam Aly","id":"1348336588561390"},"message":"*Secure* Option 10) You rely on the clients to exchange their public keys. They both use asymmetric encryption to encrypt their messages, which means you (the server-side app, the DB and the server) have no access to their private keys. You can store the message, but you have no way of decrypting it.\n\nNow that's secure. However, clients need to find a way of maintaining their keys between different devices. That's less of an issue and it's probably an acceptable limitation.\n\nAdd to that message destruction as soon as the recipient confirms receiving it so that you don't even have the metadata about who talked to whom and when.","can_remove":false,"like_count":2,"user_likes":false,"id":"1063282797044761"},{"created_time":"2016-01-16T08:52:08+0000","from":{"name":"Bassam Abd Elhamid","id":"1811475205784288"},"message":"Thank you guys.","can_remove":false,"like_count":0,"user_likes":false,"id":"1063285373711170"}],"paging":{"cursors":{"before":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEEyTXpJM016a3lNRE0zT0RrNE1qb3hORFV5T1RNeE16ZAzMZD","after":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEEyTXpJNE5UTTNNemN4TVRFM01Eb3hORFV5T1RNME16STQZD"}}}}