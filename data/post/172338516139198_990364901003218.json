{"id":"172338516139198_990364901003218","from":{"name":"Anas Ben Baligh","id":"10154910282886578"},"message":"مشكلة قديمة متجددة :) \nبرنامج حسابات خاص بشركة مقاولات , عامل فيه transaction table , و طبعا client table , المشكلة دلوقتي هل الافضل لموضوع كل عميل باقي عليه كم :\nأن يتم ده ك calculation لما ال user يعمل سيرش ع العميل ؟! بال sql يجمع توتال دفعاته , و هو باقي عليه كم و يعرض النتيجة ؟!\nولا أني أكريت ballance table يبقى فيه الاجمالي المتبقي على ال client ؟ و يتم تسجيل المتبقي عليه بعد كل transaction ?\nولا أني أضيف column  في client table اسميه مثلا client ballance , و يتم تسجيل المتبقي عليه بعد كل transaction ?\n\nده الموضوع اللي لقيته بيتكلم عن الموضوع ده :\n","story":"Anas Ben Baligh shared a link to the group: Egyptian Geeks.","story_tags":{"0":[{"id":"10154910282886578","name":"Anas Ben Baligh","type":"user","offset":0,"length":15}],"44":[{"id":"172338516139198","name":"Egyptian Geeks","type":"group","offset":44,"length":14}]},"picture":"https://fbexternal-a.akamaihd.net/safe_image.php?d=AQA5QuuBM5i555L5&w=130&h=130&url=http%3A%2F%2Fcdn.sstatic.net%2Fstackoverflow%2Fimg%2Fapple-touch-icon%402.png%3Fv%3Dfde65a5a78c6&cfs=1&_nc_hash=AQC9Awq5Ii5uvPKu","link":"http://stackoverflow.com/questions/4373968/database-design-calculating-the-account-balance","name":"Database design: Calculating the Account Balance","caption":"stackoverflow.com","description":"How do I design the database to calculate the account balance? 1) Currently I calculate the account balance from the transaction table In my transaction table I have \"description\" and \"amount\" etc...","icon":"https://www.facebook.com/images/icons/post.gif","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/990364901003218"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/990364901003218"},{"name":"Report Post to Admin","link":"https://www.facebook.com/groups/egyptian.geeks/members/"}],"privacy":{"value":"","description":"","friends":"","allow":"","deny":""},"type":"link","status_type":"shared_story","created_time":"2015-08-15T16:43:56+0000","updated_time":"2015-08-15T23:12:13+0000","is_hidden":false,"is_expired":false,"likes":{"data":[{"id":"1085492804927961","name":"Mh Ghiath Mrz"},{"id":"10154884040390170","name":"Mohammed El Sayed"},{"id":"451890128475711","name":"Ashraf Saad"},{"id":"10206808739535776","name":"AbdulRahim Sayed Al-Refaey"},{"id":"1513337665352284","name":"Hagar Abou Abdou"}],"paging":{"cursors":{"before":"MTA4NTQ5MjgwNDkyNzk2MQZDZD","after":"MTUxMzMzNzY2NTM1MjI4NAZDZD"}}},"comments":{"data":[{"created_time":"2015-08-15T16:46:33+0000","from":{"name":"Amir Mohamed Atia","id":"10155003836944840"},"message":"بص انا بفضل انك تعمل جدول كامل لحركة حساب العميل وكل ما يحصل حاجة تخص الحسابات تتسجل فيه","can_remove":false,"like_count":0,"user_likes":false,"id":"990365474336494"},{"created_time":"2015-08-15T16:53:09+0000","from":{"name":"Anas Ben Baligh","id":"10154910282886578"},"message":"تمام ده بالنسبة لحركة الحسابات , بس التوتال احسبه في ال run time ع الرغم ا ده هيبقى ابطأ وخاصة مع الوقت و زيادة الحركات ع الحساب ؟! ولا أن يبقى في ballance table يبقى فيه التوتال و اي عملية في ال transaction تغير في قيمته على طول . بالتالي لما احتاجه اناديه من ballance table ؟","can_remove":false,"like_count":0,"user_likes":false,"id":"990367721002936"},{"created_time":"2015-08-15T16:53:56+0000","from":{"name":"Amir Mohamed Atia","id":"10155003836944840"},"message":"زود عمود في جدول الحسابات ده وحط فيه قيمة الرصيد مع كل عملية","can_remove":false,"like_count":0,"user_likes":false,"id":"990367877669587"},{"created_time":"2015-08-15T16:54:26+0000","from":{"name":"Amir Mohamed Atia","id":"10155003836944840"},"message":"ولما يحب يجيب رصيد العميل يجيب اخر قيمة في الجدول بالنسبة للعميل ده","can_remove":false,"like_count":0,"user_likes":false,"id":"990368027669572"},{"created_time":"2015-08-15T17:07:24+0000","from":{"name":"Moutaz Shams","id":"1647326241951498"},"message":"الطريقة الأحسن من وجهة نظري هي الـ calculation ولو بتاخد وقت لما قاعدة البيانات بتكبر كيّش القيمة في الذاكرة أو في قاعدة البيانات والكاش يتدمر لما علمية جديدة تحصل مثلا أو كدا، طبعا كل مشروع له سياقه وأظن في أنظمة بنوك وتحويل وتأكيد تحويل وإلغاء والخ الأمور ممكن تختلف لكن التحليل ثم التصميم السليم المنطقي الـ normalized لقاعدة البيانات لازم يكون هو الأساس وغير قابل للتفاوض أو التنازل عن حاجه فيه وبعد كدا يتم حل أي مشاكل تظهر بحلول تتبنى فوق التصميم السليم ده","can_remove":false,"like_count":5,"user_likes":false,"id":"990371931002515"},{"created_time":"2015-08-15T17:58:24+0000","from":{"name":"Ahmed Refaey","id":"1471343682885337"},"message":"Moutaz Shams performance issues momken tkhalek ttbna workarounds","can_remove":false,"like_count":1,"message_tags":[{"id":"1647326241951498","length":12,"name":"Moutaz Shams","offset":0,"type":"user"}],"user_likes":false,"id":"990386191001089"},{"created_time":"2015-08-15T18:02:44+0000","from":{"name":"Mostafa Sakr","id":"10155224979338825"},"message":"ك structure مظبوط لسيستم كبير او هايبقى كبير  انك تعمل  جدول  balance بلاحظ الطريقه دى موجوده فى كل الانظمه الكبيره فغالبا هايكون لها سبب انها افضل بس انا مش عارفه :)","can_remove":false,"like_count":0,"user_likes":false,"id":"990387641000944"},{"created_time":"2015-08-15T18:25:56+0000","from":{"name":"Anas Ben Baligh","id":"10154910282886578"},"message":"هتبقى أسرع في البيرفورمنس , و هتبقى أفضل لو في multiuser .\nتخيل كده سيستم بنك , و عاوزتعرف حساب العميل ده , و اللي حاصل انك بتحسبه بالكويري , و بتعمل parse في transaction table عن عمليات العميل ده وبتحسبها و تجمعها عشان تشوف حسابه , و حد تاني بيضيف في نفس الوقت عملية ايداع مثلا ليه مش هتتحسب ساعتها .\nبس لو في ballance table هتعمل هولد ليها لو حد بيضيف حساب , فانت كواحد عاوز يشوف حسابه في كم هيظهر عندك في هولد دلوقتي عشان في عملية أيداع بتتم .\n\nأعتقد ده السبب","can_remove":false,"like_count":0,"user_likes":false,"id":"990394001000308"},{"created_time":"2015-08-15T21:11:13+0000","from":{"name":"Sameh Manaa","id":"10208892878536227"},"message":"لو ال database بتاعتك بتدعم ال materialized view\n اعمل واحد و خليه يعمل ال calculation دي و بكده هيبقى ال performance بتاع ال query أحسن و الmodel هيبقى normalized و ال database هي اللي هتهندل ال synchronization ما بين ال two tables","can_remove":false,"like_count":0,"user_likes":false,"id":"990439660995742"},{"created_time":"2015-08-15T23:12:13+0000","from":{"name":"Anas Ben Baligh","id":"10154910282886578"},"message":"http://www.fromdual.com/mysql-materialized-views","can_remove":false,"like_count":0,"user_likes":false,"id":"990508794322162"}],"paging":{"cursors":{"before":"WTI5dGJXVnVkRjlqZAFhKemIzSTZAPVGt3TXpZAMU5EYzBNek0yTkRrME9qRTBNemsyTlRjeE9UTT0ZD","after":"WTI5dGJXVnVkRjlqZAFhKemIzSTZAPVGt3TlRBNE56azBNekl5TVRZAeU9qRTBNemsyT0RBek16TT0ZD"}}}}