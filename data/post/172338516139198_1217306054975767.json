{"id":"172338516139198_1217306054975767","from":{"name":"Ahmed Sabry","id":"1454381204603437"},"message":"كنت عايز استخدم ال jwt في ال authentication وبنائاً عليه هحتاج احفظ ال access-token لأما في Cookie ﻷما في sessionStorage/localStorage\nلو استخدمت ال cookie هكون محتاج اني احمي نفسي كويس من هجوم ال CSRF ، واقدر استفاد من ال http-only في اني احمي الكوكيز من ال XSS\nولو استخدمت ال localStorage هاخلص من مشكلة ال CSRF بس هيكون عندي مشكلة اني احمي ال localStorage من ال XSS\n\nانا مستحسن موضوع ال localStorage ﻷني عايز ابعد عن استخدام ال cookies عشان ال Site بيتعامل مع تطبيق موبايل او Cross-Origin Application\nلما جيت افكر ازاي ممكن ال Attacker هيستغل ال XSS ، لاقيت انه في الغالب بيقوم مأكسس على ال localStorage varible، فانا جاتلي فكرة اني الغي الوصول لل localStorage واربط ال refernce بتاعه بأي متغير تاني داخل Anonymous scope مثلاً او حاجة زي كدا\nhttps://gist.github.com/abou7mied/f6685ba76a6615906dbceb644af8f358\nممكن الفكرة تكون ساذجة نوعاً ما بس هيا فعلاً بتأدي الغرض :D \n\nايه رأيكم في الفكرة دي وهل ال Attacker يقدر يأكسس ال localStorage بأي طريقة تانية ، او لو حد عنده فكرة تانية ؟","story":"Ahmed Sabry shared a link to the group: Egyptian Geeks.","story_tags":{"0":[{"id":"1454381204603437","name":"Ahmed Sabry","type":"user","offset":0,"length":11}],"40":[{"id":"172338516139198","name":"Egyptian Geeks","type":"group","offset":40,"length":14}]},"link":"https://gist.github.com/abou7mied/f6685ba76a6615906dbceb644af8f358","name":"Protect site against localStorage XSS attach","caption":"gist.github.com","icon":"https://www.facebook.com/images/icons/post.gif","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/1217306054975767"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/1217306054975767"},{"name":"Report Post to Admin","link":"https://www.facebook.com/groups/egyptian.geeks/members/"}],"privacy":{"value":"","description":"","friends":"","allow":"","deny":""},"type":"link","status_type":"shared_story","created_time":"2016-08-29T06:54:35+0000","updated_time":"2016-08-29T14:04:58+0000","is_hidden":false,"is_expired":false,"likes":{"data":[{"id":"1448981871792319","name":"Mohamed Abdelrahman"},{"id":"1118459391596579","name":"Mohamad Emad"},{"id":"1811475205784288","name":"Bassam Abd Elhamid"},{"id":"10158503048430515","name":"Mohamed Anan"}],"paging":{"cursors":{"before":"MTQ0ODk4MTg3MTc5MjMxOQZDZD","after":"MTAxNTg1MDMwNDg0MzA1MTUZD"}}},"comments":{"data":[{"created_time":"2016-08-29T07:59:30+0000","from":{"name":"Eslam Salem Mahmoud","id":"10155955831035299"},"message":"بص ياباشا\nاولا , بالنسبة ان ال localstorage هيخلصك من ال CSRF ده مش صحيح \nعلشان تخلص من ال csrf لازم كل الrequests اللي فيها action تبقى محمية ب Token , يا اما بتعمل validate ل ORIGIN \n\nبالنسبة  للحماية ضد ال XSS , فهي مش انك تمنع الوصول لل access token سواء cookies او localstorage , الحماية انك تمنع تنفيذ اي javascript من مدخلات اليوزر , \nلإن لو عندك xss vulnerability , فيه مليون وسيلة ممكن تبهدل الابلكيشن بتاعك \nو دي عينة صغيرة من ال payloads اللي ممكن نستغلها لو الابلكيشن فيه ثغرة XSS \nhttp://xss-payloads.com/","can_remove":false,"like_count":7,"user_likes":false,"id":"1217336554972717"}],"paging":{"cursors":{"before":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEl4TnpNek5qVTFORGszTWpjeE56b3hORGN5TkRVM05UY3gZD","after":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEl4TnpNek5qVTFORGszTWpjeE56b3hORGN5TkRVM05UY3gZD"}}}}