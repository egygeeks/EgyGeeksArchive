{"id":"172338516139198_704895349550176","from":{"name":"Emad Elsaid","id":"10154379038212957"},"message":"Share your screen on the Local Network using ruby\nhttps://gist.github.com/9151757\n\n#ruby #rails #networking #tip","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/704895349550176"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/704895349550176"},{"name":"Report Post to Admin","link":"https://www.facebook.com/groups/egyptian.geeks/members/"}],"privacy":{"value":"","description":"","friends":"","allow":"","deny":""},"type":"status","created_time":"2014-02-22T10:39:57+0000","updated_time":"2014-02-24T06:39:18+0000","is_hidden":false,"is_expired":false,"likes":{"data":[{"id":"10158460397575372","name":"Amr Reda"},{"id":"10210277573008432","name":"Eslam Hamouda"}],"paging":{"cursors":{"before":"MTAxNTg0NjAzOTc1NzUzNzIZD","after":"MTAyMTAyNzc1NzMwMDg0MzIZD"}}},"comments":{"data":[{"created_time":"2014-02-22T10:45:01+0000","from":{"name":"Eslam Hamouda","id":"10210277573008432"},"message":"+1 for the base64 way.\nReaderWriterProblem will raise an exception on line 15 with multi-requests in the same time.","can_remove":false,"like_count":0,"user_likes":false,"id":"704896136216764"},{"created_time":"2014-02-22T10:46:11+0000","from":{"name":"Emad Elsaid","id":"10154379038212957"},"message":"maybe, but i didn't face it, it will appear with heavy load i think.","can_remove":false,"like_count":1,"user_likes":false,"id":"704896462883398"},{"created_time":"2014-02-22T22:28:19+0000","from":{"name":"Hady Ahmed","id":"10210684524123349"},"message":"Eslam Hamouda Ruby's MRI threads implementation is green, so context switching takes place through the GIL, so yes there will likely be a read-write lock issue with the file but it wont throw any errors.\nThe problem is in the image variable, that's a plain check-and-set race condition, there is really no reason why it should be living in the global namespace.\n\nEmad Elsaid I'm sorry buddy but I dislike the code. It's a tips & tricks post so it should offer idiomatic ruby code with proper styling and good solution design. I took the liberty and made this https://gist.github.com/l0gicpath/9163091\n\nThe notes I had about the code:\n\n- The simplest http server should still send header information\n\n- tabs should be 2 spaces (soft tabs) per indentation level\n\n- variables if started with a letter, the letter should be in a lower case\n\n- The server should hand off connections as fast as possible so move the dependency on an external process whose purpose is a shared interest into its own context\n\n- Spacing spacing spacing :D between operators +  - >=\n\n- Ruby probably has one of the largest collection of string literals, do. not. use. string concatenation for long strings\n\n- Stay consistent with double and single quotes, lines 19 to 23\n\nResult? Still a very small code base (50 SLOC) but in the true spirit of ruby :)","can_remove":false,"like_count":2,"message_tags":[{"id":"10210277573008432","length":13,"name":"Eslam Hamouda","offset":0,"type":"user"},{"id":"10154379038212957","length":11,"name":"Emad Elsaid","offset":363,"type":"user"}],"user_likes":false,"id":"705134576192920"},{"created_time":"2014-02-22T22:32:45+0000","from":{"name":"Emad Elsaid","id":"10154379038212957"},"message":"Nice, I will make sure apply these guides in my code :)","can_remove":false,"like_count":0,"user_likes":false,"id":"705137319525979"},{"created_time":"2014-02-23T08:57:49+0000","from":{"name":"Mohammad Tayseer","id":"10154965677956341"},"message":"I'm wondering why don't you use HTTP server directly? (I'm not a Rubyist)","can_remove":false,"like_count":0,"user_likes":false,"id":"705317622841282"},{"created_time":"2014-02-23T09:02:06+0000","from":{"name":"Emad Elsaid","id":"10154379038212957"},"message":"الdocs بتاعة الكلاس ده مش واضحة خالص للاسف","can_remove":false,"like_count":0,"user_likes":false,"id":"705318546174523"},{"created_time":"2014-02-23T11:38:28+0000","from":{"name":"Mohammad Tayseer","id":"10154965677956341"},"message":"HTTP server (eg. WEBrick) should handle HTTP headers for you. This command also works as a file server \n\nruby -run -e httpd . -p 5000","can_remove":false,"like_count":1,"user_likes":false,"id":"705357756170602"},{"created_time":"2014-02-23T11:46:08+0000","from":{"name":"Emad Elsaid","id":"10154379038212957"},"message":"i didn't know ruby has such command line usage. O_O","can_remove":false,"like_count":0,"user_likes":false,"id":"705359659503745"},{"created_time":"2014-02-23T13:13:31+0000","from":{"name":"Hady Ahmed","id":"10210684524123349"},"message":"There is a lot more to ruby than meets the eye, python also ships with a basic httpd, the httpd Mohammad Tayseer mentioned is just a standard unix utilities script that ships with ruby std (lib/un.rb). WEBrick is the standard embedded http server that ships with ruby, if you're half serious about doing something that won't scale then that's your thing. If you're serious then you're better off with a middleware like rack.\n\nWe also have a resuable generic server implementation for any application layer server \"gserver\", the \"xmlrpc/http_server\" is just an example implementation not intended for reuse.\nThe command is not uncommon, ruby interpreter can do a lot of things from looping your script turning it into a REPL all the way to executing ruby commands.\n\nAll in all, there are probably a dozen different ways to build any server of any kind in ruby. Emad Elsaid you'll do yourself a lot of good reading ruby's code then moving over to ruby's implementation code (the c interpreter)","can_remove":false,"like_count":2,"message_tags":[{"id":"10154965677956341","length":16,"name":"Mohammad Tayseer","offset":96,"type":"user"},{"id":"10154379038212957","length":11,"name":"Emad Elsaid","offset":860,"type":"user"}],"user_likes":false,"id":"705386049501106"},{"created_time":"2014-02-24T05:16:45+0000","from":{"name":"Mohamed Alaa El Din","id":"1252478278163674"},"message":"You can use shotgun it's much lighter than webrick","can_remove":false,"like_count":0,"user_likes":false,"id":"705772466129131"},{"created_time":"2014-02-24T06:39:18+0000","from":{"name":"Hady Ahmed","id":"10210684524123349"},"message":"Shotgun is not a web server, it's an automated code/environment reloading extension to rack. Specifically it replaces rackup, offers automatic code reloading in cases when you change the code and want the changes detected without restarting the server.","can_remove":false,"like_count":1,"user_likes":false,"id":"705788812794163"}],"paging":{"cursors":{"before":"WTI5dGJXVnVkRjlqZAFhKemIzSTZAOekEwT0RrMk1UTTJNakUyTnpZAME9qRXpPVE13TmpVNU1ERT0ZD","after":"WTI5dGJXVnVkRjlqZAFhKemIzSTZAOekExTnpnNE9ERXlOemswTVRZAek9qRXpPVE15TWpNNU5UZAz0ZD"}}}}