{"id":"172338516139198_733007323405645","from":{"id":"100003473671632","name":"مروان عبد المنعم"},"to":{"data":[{"name":"Egyptian Geeks","id":"172338516139198"}]},"message":"i have a poor database design here, any database ninja knows how to improve it?","picture":"https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDXZz2qPPzN-uic&w=154&h=154&url=http%3A%2F%2Fcdn.sstatic.net%2Fstackoverflow%2Fimg%2Fapple-touch-icon%402.png%3Fv%3Dfde65a5a78c6","link":"http://stackoverflow.com/questions/23157564/what-is-a-better-way-than-arrays-overlap-postgresql","name":"what is a better way than arrays overlap? (postgresql)","caption":"stackoverflow.com","description":"I am building an app for a business company, and they need to control who sees which reports by project and roles, the report can belong to one project and can be seen by many roles (employees role...","icon":"https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/733007323405645"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/733007323405645"}],"privacy":{"value":""},"type":"link","created_time":"2014-04-18T21:57:03+0000","updated_time":"2014-04-19T16:08:54+0000","comments":{"data":[{"id":"733021240070920","from":{"id":"100003473671632","name":"مروان عبد المنعم"},"message":"الفكرة انى لو عملت كدة مش عارف هاجيب تقارير الموظف ازاى؟","can_remove":false,"created_time":"2014-04-18T22:45:16+0000","like_count":0,"user_likes":false},{"id":"733028440070200","from":{"id":"100003473671632","name":"مروان عبد المنعم"},"message":"i need help, but for some reasons i can't tell what the whole system are doing.\nthe important part of the system is showing to each employee the reports he allowed to see and worked in it's project.\nthere are some employee with a certain roles can create reports, when they do they specify the project and the employee roles that can see the report.\nthere is no roles table now, i just save them as strings in the employee table and check over them (if the array contain string X, let him do Y).\nand also i choosed this approach because i thought this will make the main reports query for each emloyee easier. but i think this won't scale.\n\ni think if i normalized the database the tables will look like this\nhttps://docs.google.com/drawings/d/1sJ7TOrtYTiI55qQP358l5_uYeZVa-smC8SmHaC56F3U/edit?usp=sharing\nbut this is even harder for me to get the reports for each employee that he worked in it's project and has a role to see it","can_remove":false,"created_time":"2014-04-18T23:11:33+0000","like_count":0,"user_likes":false},{"id":"733100210063023","from":{"id":"1055914266","name":"Hady Ahmad"},"message":"Disclaimer: I haven't slept yet so take it with a grain of salt.\n\nhttp://sqlfiddle.com/#!2/d5606/48\n\nPostgresql offers a lot of niceties but we'll stick to basics here.\nDon't concern yourself with performance today when you have fewer than a couple of thousand records.\nI'm not entirely sure this solves your problem but it was a fun 20 minutes.\nGood luck.","can_remove":false,"created_time":"2014-04-19T03:21:57+0000","like_count":0,"user_likes":false},{"id":"733354036704307","from":{"id":"100003473671632","name":"مروان عبد المنعم"},"message":"man, i don't know what to say, thanks very much for your help and time.\ni think you just missed something, that the employee could have many roles.\ni updated the schema, created new table and report.\nand wrote the main query i want with a lot of crazy joins\nhttp://sqlfiddle.com/#!2/b0ce4/1\nand i works great now\nthanks again","can_remove":false,"created_time":"2014-04-19T16:08:25+0000","like_count":0,"user_likes":false},{"id":"733354210037623","from":{"id":"100003473671632","name":"مروان عبد المنعم"},"message":"i didn't know sqlfiddle before, it's great tool","can_remove":false,"created_time":"2014-04-19T16:08:54+0000","like_count":0,"user_likes":false}],"paging":{"cursors":{"after":"NzMzMzU0MjEwMDM3NjIz","before":"NzMzMDIxMjQwMDcwOTIw"}}}}