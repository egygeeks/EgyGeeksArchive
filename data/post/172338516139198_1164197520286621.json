{"id":"172338516139198_1164197520286621","from":{"name":"Ahmed Amin","id":"1813081165632012"},"message":"السلام عليكم\n\nمن يومين حطيت بوست بخصوص مساعدتى فى الطريقة الصحيحة لعمل وحدات فرعية للأصناف مثلا البيع بالعلبة او الشريط او الاقراص \n\nوالحمد لله ربنا يسر الحال تفضل احد الاخوة الافاضل بوضع طريقة لتنفبذ الفكرة (بارك الله له)\n\nتعال نقول الكيتوفان علبة تلت شرايط عشر حبات.\nفي الحدول الاول عندي كيتوفان ٥٠ علبة ٣٠ حباية ككود الصنف\nفي الجدول التاني عندي لكود الصنف كيتوفان \nعلبة كاملة وشريط وحباية\nفيه عمود كمان اسمه الأب ونسبة من الاب\nعند العلبة قيمتهم نال او زيرو لان العلبة مالهاش اب\nعند الشريط الاب هو الكود بتاع العلبة والنسبة ٣ يعني كل علبة فيها تلت شرايط\nوالحباية الاب بتاعها شريط والنسبة ١٠ علشان الشريط فيه عشر حبايات\n\nفي حركة البيع والمخزون بتستخد الكود اللي في الجدول التاني. يعني دخلك كام علبة وكام شريط.\nربط الوحدات ببعض هيساعدك ان تحسب المخزون.\n\n وقمت بتنفيذها ولكنى تصادفنى مشكلة ومش عارفة اهندلها ازاى \n\nالفكرة ان فى النهاية عاوز اظهر الرصيد حسب وحدات الصنف  مثلا \n\n10 علبة - 1 شريط - 5 قرص .... وهكذا .....\n\n*************************************************\n\nده المثال اللى عملته على المشروع اللى شغال عليه:\n\nسجلت صنف كيتوفان اقراص والوحدات بتاعته كالتالى:\nالوحدة - النسبة من الاب - الاسعار ....\nعلبة - 1 - ...... (نسبتها 1 لأنها عبوة واحدة)\nشريط - 2 - ..... (نسبتها 2 لأن كل علبه فيها شريطين )\nقرص - 20 - ..... (نسبتها 10 لأن كل شريط فيها 10 قرص وهما 2 شريط)\n\nورصيد الصنف 150 علبة ( 50 رصيد افتتاحى - 100 فاتورة شراء)\nوبعت منه علبة \nوفى فاتورة اخرى 3 شرايط\nوفى فاتورة اخرى 2 قرص\n\nدلوقتى الكود بيظهر ليا البيانات كالتالى:\nعلبة = 1 / نسبته من الاب (1) = (1) - كده هو باع علبة\nشريط = 2 / نسبته من الاب (2) = (1.5) - كده هو باع علبة تانية وشريط\nقرص = 2 / نسبته من الاب (10) = (0.2) - كده هو باع 20% من الشريط يعنى قرصين\n\nكده انا عرفت هو اجمالى اللى باعه كام = 2.70 من 150 كده بقا حطلع الرصيد ازاى ؟\n\nيعنى 150 - 2.70 = 147.30 كده عندى 147 علبة طيب .30 دول اعتبرهم ايه","actions":[{"name":"Comment","link":"https://www.facebook.com/172338516139198/posts/1164197520286621"},{"name":"Like","link":"https://www.facebook.com/172338516139198/posts/1164197520286621"},{"name":"Report Post to Admin","link":"https://www.facebook.com/groups/egyptian.geeks/members/"}],"privacy":{"value":"","description":"","friends":"","allow":"","deny":""},"type":"status","created_time":"2016-06-18T01:52:23+0000","updated_time":"2016-06-18T12:05:00+0000","is_hidden":false,"is_expired":false,"likes":{"data":[{"id":"10154846170759733","name":"Islam R Hefny"}],"paging":{"cursors":{"before":"MTAxNTQ4NDYxNzA3NTk3MzMZD","after":"MTAxNTQ4NDYxNzA3NTk3MzMZD"}}},"comments":{"data":[{"created_time":"2016-06-18T02:03:26+0000","from":{"name":"Alaa Samir","id":"10154210127357413"},"message":"هو دلوقتي الرصيد بيظهر عندك بأنهي وحدة؟","can_remove":false,"like_count":0,"user_likes":false,"id":"1164201013619605"},{"created_time":"2016-06-18T02:10:18+0000","from":{"name":"Meligy","id":"10154884040385170"},"message":"بص .. هو أنا دماغي لفت ومش فاهم أوي، بس أهي محاولة:\nفي اللي بيظهر ما تهتمش بالأب. اظهر بس اللي نسبته ١٠٠٪ ولو كان له أب أو مالوش.\nلو فيه علبة ناقص من نسبتها مش هتظهر\nبس الشريط اللي فاضل هتيظهر لإن نبسبته ما اتغيرتش.\nنفس الشيء مع القرص والشريط. الشريطة اللي مش ناقص هيظهر، و القرص ما ينفعش ينقص، هو يا موجود يا مش موجود.","can_remove":false,"like_count":1,"user_likes":false,"id":"1164203546952685"},{"created_time":"2016-06-18T02:12:58+0000","from":{"name":"Alaa Samir","id":"10154210127357413"},"message":"فكرة النسب دي فكرة انا شايف انها هاتعمل مشاكل\nفي شرايط فيها 7 حبات\nتخيل بقا 100/7 فهاتلاقي كسور وهيصة\n\nانا رأيي انك تترجم البيع والشراء وكله يلعب بالحباية\nيعني بيع شريط ينزل 10 حبات وبيع علبة ينزل 20 حباية مثلاً وهكذا\n\nوبالنسبة لفكرة انك تشوف الرصيد في الاخر\nتقدر تشتغل علي\n$var%$var2\n\nانك تشوف باقي القسمة من الكبير للصغير\nهاشرحلك مثل في التعليق اللي جي","can_remove":false,"like_count":3,"user_likes":false,"id":"1164209643618742"},{"created_time":"2016-06-18T02:17:21+0000","from":{"name":"Alaa Samir","id":"10154210127357413"},"message":"لو الشريط = 10 حبايات\nلو العلبة = 2 شريط = 20 حباية\n\nلو الرصيد بقا اللي عندك = 75 حباية\n\nاعمل المعادلات دي\n75%20 = 15 يعني باقي قسمة ال75 علي ال20 اللي هما العلبة = 15 حباية\nاعمل 75-15 = 60\nاقسم ال60 علي 20 يطلع 3 يعني معاك 3 علب\n\nهات بقا ال15 باقي القسمة\nبردو\n15%10 علشان ده الشريط هايجيبلك باقي القسمة 5\nهات 15 - ال5 = 10 اقسم 10 علي 10 هايطلع واحد يعني معاك شريط واحد\nوباقي الحبوب 5\n\nيبقا معاك 3 علب و1 شريط و5 حبايات","can_remove":false,"like_count":2,"user_likes":false,"id":"1164210783618628"},{"created_time":"2016-06-18T02:23:10+0000","from":{"name":"Alaa Samir","id":"10154210127357413"},"message":"الفكرة كأن معاك ايام وساعات ودقائق وثواني كتير\nوهايز تعرف هما كام يوم وكان ساعة وكام دقيقة وكام ثانية\n\nفبتحولهم كلهم الي ثواني\nوتطلع منهم عدد الايام والساعات والدقائق والثواني","can_remove":false,"like_count":2,"user_likes":false,"id":"1164213613618345"},{"created_time":"2016-06-18T03:18:42+0000","from":{"name":"Islam R Hefny","id":"10154846170759733"},"message":"هقولك على طريقه #اذكى و ابسط ..\nالوحده الرئيسية عندك هيه الوحده الصغرى ..\nالكميات الفعليه مسجله بيها ..\nالوحدات التانيه الي هي اكبر ما هيه إلا حزمه (package) من الوحده الصغيره ..\nيعني ايه ..\nيعني كل 12 حبايه ده اسمهم علبه ..\nو هكذا ..\nهيبقى عندك جدول تاني ..\nفيه الـ item_id .. و الـ factor و الـ unit_id\nبس .. تقسم ع الفاكتور تتطلع الكميه الي عندك ..\nتساوي قد ايه .. فرط او شريط او علبه ..\nالموضوع بسيط ,,","can_remove":false,"like_count":2,"user_likes":false,"id":"1164235136949526"},{"created_time":"2016-06-18T09:10:59+0000","from":{"name":"Amr ELsaqqa","id":"10155181258139701"},"message":"اقرا عن ال units of measures handling \n(UOM) \nفي اي سستم ERP محترم..  هتلاقي الفكرة سهلة جدا","can_remove":false,"like_count":1,"user_likes":false,"id":"1164364533603253"},{"created_time":"2016-06-18T11:22:40+0000","from":{"name":"Ahmed Mamdouh","id":"10154219402090800"},"message":"الرصيد \n١٤٧ علبة\nواحد شريط\n٨ حبات","can_remove":false,"like_count":0,"user_likes":false,"id":"1164414400264933"},{"created_time":"2016-06-18T11:25:35+0000","from":{"name":"Ahmed Mamdouh","id":"10154219402090800"},"message":"زي الدقايق والثواني. ماينفعش تستخدم النسب وتطلع رقم واحد للمخزون من وحدة العلب لان الكسور هاتعمل مشاكل.\nتطلع المخزون بوحدات البيع المختلفة.\nوبكدة حتى لو شريط ٧ حبات مايعملش مشكلة.","can_remove":false,"like_count":0,"user_likes":false,"id":"1164414960264877"},{"created_time":"2016-06-18T11:53:52+0000","from":{"name":"Ahmed Badawy","id":"1285105998248677"},"message":"انا عملت حاجة شبيهة قبل كدة.. \nكنت بستخدم json و بحفظه ك string بال db.. \nو برجعه obj فال  frontend و بعمل العمليات عليه. و كنت بحفظ الارقام ك نسب مثلا 1/5 . و بطرح و برجمع كنسب برضه. كنت بستخدم مكتبة (مش فاكر اسمها حاليا)...","can_remove":false,"like_count":0,"user_likes":false,"id":"1164423663597340"},{"created_time":"2016-06-18T12:05:00+0000","from":{"name":"Amr ELsaqqa","id":"10155181258139701"},"message":"انا عايز اوضح حاجة \nدلوقتي لو العلبة شريطين\nفمش معنى اني معايا 6 شرايط مثلا اني اقدر اقول 3 علب مقفولين ..  لان ممكن يكونوا كلهم فرط ومفيش علب ليهم \n\nولو الشريط 7 اقراص برضو نفس الفكرة..  لو عندي 12 قرص..  مش لازم يكون معناها شريط و 5 اقراص\nلان وارد يكون متاخد من كل شريط قرص..  فبالتالي معنديش ولا شريط حقيقي صحيح!! \n\nالموضوع بيمشي كالتالي وانا بتكلم باللي بيتعمل في ال erp \n\n في جدول الأصناف نفسها هتعرف وحدة قياس اساسية..  ودي الوحدة المنطقية او اللي غالبا بتشتري وتبيع بيها وتستلم وتصرف بيها يعني مش لازم اصغر ولا اكبر وحدة..  يعني في الدوا غالبا هي علبة..  مش حباية وشريط..  ولا كرتونة لو انت في الصيدلية.. بمعنى ادق الاسهل تبقى هي نفس وحدة الرف.. ( يعني في الصيدلية علبة وفي المخزن كرتونة )\n\nبعد كدة في جدول لل uoms تحويلات الوحدات المختلفة لكل صنف.. عبارة كود الصنف واسم الوحدة الثانوية و عمودين  بسط ومقام نسبة وتناسب مع الوحدة الرئيسية ( لو عايز تعقدها وتحط العمود بتاع الاب براحتك بحيث كل وحدة تبقى نسبة للي قبلها مش للوحدة الاساسية بس)\n\n ولازم أرقام صحيحة مفيش كسور.. ظبط النسبة وتناسب بحيث تبقى بدون كسور\nيعني مثلا لو عندنا وحدة الوزن بالكيلو عايزين نعرفها وقلت ان الكرتونة 2.5 كيلو..  \nساعتها هنقول ان الكرتونتين 5 كيلو( يعني نوصل النسبة لارقام صحيحة) يعني هنحط في الاتنين كولوم  نسبة 2:5 ..  \nطريقة الحساب تضرب الكمية في النسبة .  يعني مثلا 16 كرتونة في 5 على 2 يدينا 40 كجم \n\nفي كل عملية مخزن بتخصم القيمة بالوحدة اللي استلمت او صرفت بيها يعني بتخزن الكمية ب الوحدة طبعا مع بيانات الحركة وفي نفس الوقت قيمتها بالوحدة الاساسية وقت تنفيذ الحركة\n\nالرصيد بيجمع على مستوى الوحدة الأساسية في الحركة اللي بيبقى فيه كسور عادي من ناتج التحويل من وحدة الصرف او الاستلام وقت الحركة..  فممكن يطلع الرصيد مثلا 2.9 علبة لو 3 علب منهم علبة ناقصة قرص عادي..  \nوممكن يبقى عندك نصين علبة هيطلعوا 1 دي ككمية مكافئة او كقيمة انما لما اجي افردها لازم يبقى عندي الرفرنس بتاع الحركات..  مش اني اقول 21 قرص يعني  3 شرايط مقفولين..  واعاملها معاملة وحدات الزمن انه يقرب اوتوماتيك لأقرب وحدات.. لا مش شرط..  \nالرصيد بيبقى بالوحدة الاساسية بكسور..  عشان تقيم مخزونك كمية وقيمة..  يا اما تفاصيل الحركات بوحدات الصرف والاستلام اللي حصلت بيها..( وممكن يتعمل group by كل وحدة مفيش مانع )  اما ان حاجة تحول on the fly كدة بأقرب وحدات ممكنة زي يوم وساعة ودقيقة وثانية..  لا مش صح اصلا تتعمل كدة","can_remove":false,"like_count":1,"user_likes":false,"id":"1164427253596981"}],"paging":{"cursors":{"before":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEUyTkRJd01UQXhNell4T1RZAd05Ub3hORFkyTWpFMU5EQTMZD","after":"WTI5dGJXVnVkRjlqZAFhKemIzSTZANVEUyTkRReU56STFNelU1TmprNE1Ub3hORFkyTWpVeE5UQXgZD"}}}}